---
title: フォームデータモデルの設定
description: RDBMSデータソースに基づくフォームデータモデルの作成
feature: アダプティブフォーム
topics: development
audience: developer
doc-type: article
activity: implement
version: 6.4,6.5
kt: 5812
thumbnail: kt-5812.jpg
topic: 開発
role: Developer
level: Beginner
source-git-commit: d9714b9a291ec3ee5f3dba9723de72bb120d2149
workflow-type: tm+mt
source-wordcount: '495'
ht-degree: 3%

---



# フォームデータモデルの設定

## Apache Sling接続プールに入れられたデータソース

RDBMSでバックアップされたフォームデータモデルを作成する最初の手順は、Apache Sling接続プールに入れられたデータソースを設定することです。 データソースを設定するには、次の手順に従います。

* ブラウザーで[configMgr](http://localhost:4502/system/console/configMgr)を参照します。
* **Apache Sling Connection Pooled DataSource**&#x200B;を検索します。
* 新しいエントリを追加し、スクリーンショットに示すように値を指定します。
* ![data-source](assets/data-source.png)
* 変更を保存します

>[!NOTE]
>JDBC接続のURI、ユーザー名、パスワードは、MySQLデータベース設定に応じて変わります。


## フォームデータモデルの作成

* ブラウザーで[データ統合](http://localhost:4502/aem/forms.html/content/dam/formsanddocuments-fdm)を参照します。
* 「_作成_->_フォームデータモデル_」をクリックします。
* フォームデータモデルに、**Employee**&#x200B;などの意味のある名前とタイトルを付けます。
* 「_次へ_」をクリックします。
* 前のセクション（フォーラム）で作成したデータソースを選択します
* 「_作成_->編集」をクリックして、新しく作成したフォームデータモデルを編集モードで開きます。
* _forums_&#x200B;ノードを展開して、従業員スキーマを表示します。 employeeノードを展開して、2つのテーブルを表示します。

## モデルにエンティティを追加する

* employeeノードが展開されていることを確認します。
* 新しいエンティティと受益者エンティティを選択し、「_選択項目を追加_」をクリックします。

## 新しいエンティティへの読み取りサービスの追加

* エンティティを選択
* 「_プロパティを編集_」をクリックします。
* 「読み取りサービス」ドロップダウンリストから「 get 」を選択します。
* 「 + 」アイコンをクリックして、getサービスにパラメーターを追加します。
* スクリーンショットに示すように値を指定します
* ![get-service](assets/get-service.png)
>[!NOTE]
> getサービスは、新しいエンティティのempID列にマッピングされた値を想定します。この値を渡す方法は複数あり、このチュートリアルでは、empIDと呼ばれるリクエストパラメータを通じてempIDを渡します。
* 「_完了_」をクリックして、getサービスの引数を保存します。
* 「_完了_」をクリックして、フォームデータモデルに対する変更を保存します。

## 2エンティティ間の関連付けの追加

データベースエンティティ間で定義された関連付けは、フォームデータモデルでは自動的には作成されません。 エンティティ間の関連付けは、フォームデータモデルエディターを使用して定義する必要があります。 全ての権利者が1人以上の受益者を持つことができるので、我々は、根拠者と受益者の間の1対多の関連を定義する必要がある。
次の手順で、1対多の関連付けを作成するプロセスを説明します

* エンティティを選択し、「_関連付けを追加_」をクリックします。
* 以下のスクリーンショットに示すように、関連付けおよびその他のプロパティに意味のあるタイトルと識別子を指定します。
   ![連想](assets/association-entities-1.png)

* 「引数」セクションの下の「_編集_」アイコンをクリックします。

* このスクリーンショットに示すように値を指定します
* ![association-2](assets/association-entities.png)
* **受益者エンティティと新しいエンティティのempID列を使用して、2つのエンティティをリンクします。**
* 「_完了_」をクリックして変更を保存します。

## フォームデータモデルのテスト

フォームデータモデルに、empIDを受け取り、新しい層とその受益者の詳細を返す&#x200B;**_get_**&#x200B;サービスが追加されました。 getサービスをテストするには、次の手順に従います。

* エンティティを選択
* 「_モデルオブジェクトをテスト_」をクリックします。
* 有効なempIDを指定し、_テスト_&#x200B;をクリックします。
* 以下のスクリーンショットに示すように、結果が表示されます
* ![test-fdm](assets/test-form-data-model.png)
