---
title: アダプティブフォームの作成
description: フォームデータモデルの事前入力サービスを使用するためのアダプティブフォームの作成と設定
feature: アダプティブフォーム
version: 6.4,6.5
kt: 5813
thumbnail: kt-5813.jpg
topic: 開発
role: User
level: Beginner
source-git-commit: 462417d384c4aa5d99110f1b8dadd165ea9b2a49
workflow-type: tm+mt
source-wordcount: '609'
ht-degree: 2%

---


# アダプティブフォームの作成

これまで、以下を作成しました

* 2つのテーブル（`newhire`と`beneficiaries`）を持つデータベース
* 設定済みのApache Sling接続プールに入れられたデータソース
* RDBMSベースのフォームデータモデル

次の手順では、フォームデータモデルを使用するようにアダプティブフォームを作成し、設定します。  [サンプルフォームをダウンロードして読み込むことができます。 ](assets/fdm-demo-af.zip)サンプルフォームには、従業員の詳細を表示するセクションと、従業員の受益者をリストする別のセクションが含まれています。

## フォームをフォームデータモデルに関連付ける

このコースで提供されるサンプルフォームは、どのフォームデータモデルにも関連付けられていません。 フォームデータモデルを使用するようにフォームを設定するには、次の手順を実行する必要があります。

* FDMDemoフォームを選択します。
* 「_プロパティ_->_フォームモデル_」をクリックします。
* ドロップダウンリストから「フォームデータモデル」を選択します
* 前のレッスンで作成したフォームデータモデルを検索して選択します。
* 「_保存して閉じる_」をクリックします。

## 事前入力サービスの設定

最初の手順は、フォームに事前入力サービスを関連付けることです。 事前入力サービスを関連付けるには、次の手順に従ってください

* `FDMDemo`フォームを選択します。
* 「_編集_」をクリックして、フォームを編集モードで開きます。
* コンテンツ階層で「フォームコンテナ」を選択し、レンチアイコンをクリックして、そのプロパティシートを開きます。
* 「事前入力サービス」ドロップダウンリストから「_フォームデータモデル事前入力サービス_」を選択します。
* 青をクリック☑して変更を保存します。

* ![prefill-service](assets/fdm-prefill.png)

## 従業員の詳細の構成

次の手順は、アダプティブフォームのテキストフィールドをフォームデータモデル要素にバインドすることです。 次のフィールドのプロパティシートを開き、次に示すようにbindRefを設定する必要があります


| フィールド名 | バインド参照 |
|------------|--------------------|
| 名 | /newhire/FirstName |
| 姓 | /newhire/lastName |

>[!NOTE]
>
>テキストフィールドを自由に追加し、適切なフォームデータモデル要素に連結する

## 受益者テーブルの構成

次のステップは、従業員の受益者を表形式で表示することです。 提供されるサンプルフォームには、4つの列と1つの行を持つテーブルが含まれています。 受益者の数に応じて拡大するようにテーブルを設定する必要があります。

* フォームを編集モードで開きます。
* 「Root Panel」>「Your Husnaries」>「Table」を展開します。
* Row1を選択し、レンチアイコンをクリックして、そのプロパティシートを開きます。
* バインド参照を&#x200B;**/newhire/GetEmployeeWensiters**&#x200B;に設定します。
* 「繰り返し設定 — 最小カウント」を1に、「最大カウント」を5に設定します。
* Row1設定は、次のスクリーンショットのようになります。
   ![row-configure](assets/configure-row.PNG)
* 青色の「☑」をクリックして変更を保存します。

## 行のセルの連結

最後に、行セルをフォームデータモデル要素に連結する必要があります。

* 「Root Panel」>「Your Husnaries」>「Table」>「Row1」を展開します。
* 次の表に従って、各行セルの連結参照を設定します

| 行セル | バインド参照 |
|------------|----------------------------------------------|
| firstName | /newhire/GetEmployeeHusnaries/firstname |
| 姓 | /newhire/GetEmployeeHusnaries/lastname |
| 関係 | /newhire/GetEmployeeHusnaries/relation |
| 割合 | /newhire/GetEmployeeHunsentaries/percentage |

* 青色の「☑」をクリックして変更を保存します。

## フォームのテスト

次に、URL内に適切なempIDを含むフォームを開く必要があります。 次の2つのリンクは、データベースからの情報をフォームに入力します
[empID=207](http://localhost:4502/content/dam/formsanddocuments/fdmdemo/jcr:content?wcmmode=disabled&amp;empID=207)のフォーム
[empID=208](http://localhost:4502/content/dam/formsanddocuments/fdmdemo/jcr:content?wcmmode=disabled&amp;empID=208)のフォーム

## トラブルシューティング

フォームが空白で、データがない

* フォームデータモデルが正しい結果を返していることを確認します。
* フォームが正しいフォームデータモデルに関連付けられている
* フィールドの連結を確認します。
* stdoutログファイルを確認します。 empIDがファイルに書き込まれていることが確認できます。この値が表示されない場合、フォームは提供されたカスタムテンプレートを使用していない可能性があります。

テーブルに値が入力されていない

* Row1連結の確認
* 行1の繰り返し設定が正しく設定されていることを確認します（最小=1、最大= 5以上）。

