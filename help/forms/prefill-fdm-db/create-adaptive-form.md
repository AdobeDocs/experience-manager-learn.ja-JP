---
title: アダプティブフォームの作成
description: フォームデータモデルの事前入力サービスを使用するアダプティブフォームの作成と設定
feature: Adaptive Forms
version: 6.4,6.5
jira: KT-5813
thumbnail: kt-5813.jpg
topic: Development
role: User
level: Beginner
exl-id: c8d4eed8-9e2b-458c-90d8-832fc9e0ad3f
duration: 145
source-git-commit: 9fef4b77a2c70c8cf525d42686f4120e481945ee
workflow-type: tm+mt
source-wordcount: '598'
ht-degree: 3%

---

# アダプティブフォームの作成

これまでに、以下を作成しました。

* 2 つのテーブルを持つデータベース — `newhire` および `beneficiaries`
* 設定済みの Apache Sling 接続プールに入れられたデータソース
* RDBMS ベースのフォームデータモデル

次の手順では、フォームデータモデルを使用するアダプティブフォームを作成し、設定します。  優れたスタートを切るには、次の操作を実行します。 [ダウンロードとインポート](assets/fdm-demo-af.zip) サンプルフォーム。 サンプルフォームには、従業員の詳細を表示するセクションと、従業員の受取人をリストする別のセクションがあります。

## フォームをフォームデータモデルに関連付ける

このコースで提供されるサンプルフォームは、どのフォームデータモデルにも関連付けられていません。 フォームデータモデルを使用するようにフォームを設定するには、以下の手順を実行する必要があります。

* FDMDemo フォームを選択
* クリック： _プロパティ_->_フォームモデル_
* ドロップダウンリストから「フォームデータモデル」を選択します。
* 前のレッスンで作成したフォームデータモデルを検索して選択します。
* クリック： _保存して閉じる_

## 事前入力サービスを設定する

最初の手順は、フォームに事前入力サービスを関連付けることです。 事前入力サービスを関連付けるには、次の手順に従ってください

* を選択します。 `FDMDemo` フォーム
* クリック _編集_ フォームを編集モードで開くには
* コンテンツ階層で「フォームコンテナ」を選択し、レンチアイコンをクリックして、そのプロパティシートを開きます。
* 選択 _フォームデータモデルの事前入力サービス_ 事前入力サービスドロップダウンリストから
* 青をクリッ☑クして変更を保存します。

* ![prefill-service](assets/fdm-prefill.png)

## 従業員の詳細の構成

次の手順は、アダプティブフォームのテキストフィールドをフォームデータモデルの要素にバインドすることです。 次のフィールドのプロパティシートを開き、次に示すように bindRef を設定する必要があります。


| フィールド名 | バインド参照 |
|------------|--------------------|
| 名 | /newhire/FirstName |
| LastName | /newhire/lastName |

>[!NOTE]
>
>テキストフィールドを自由に追加し、適切なフォームデータモデル要素に連結します。

## 受益者テーブルの構成

次のステップは、従業員の受益者を表形式で表示することです。 提供されるサンプルフォームには、4 列 1 行のテーブルがあります。 受益者の数に応じて拡大するようにテーブルを設定する必要があります。

* フォームを編集モードで開きます。
* 「Root Panel」を展開します。>「Your Hunsaries」>「Table」を展開します。
* Row1 を選択し、レンチアイコンをクリックして、そのプロパティシートを開きます。
* バインド参照をに設定 **/newhire/GetEmployeeHunsiers**
* 繰り返し設定 (Repeat Settings) の最小値を 1 に、最大値を 5 に設定します。
* Row1 設定は、以下のスクリーンショットのようになります。
  ![行を設定](assets/configure-row.PNG)
* 青色のアイコンをクリッ☑して、変更を保存します。

## 行のセルを連結

最後に、行のセルをフォームデータモデルの要素に連結する必要があります。

* 「Root Panel」を展開します。>「Your Husnaries」>「Table」>「Row1」を展開します。
* 次の表に従って、各行のセルの連結参照を設定します。

| 行のセル | バインド参照 |
|------------|----------------------------------------------|
| 名前（名） | /newhire/GetEmployeeHunsities/firstname |
| 姓 | /newhire/GetEmployeeHunsiers/lastname |
| 関係 | /newhire/GetEmployeeHunseries/relation |
| 割合 | /newhire/GetEmployeeHunseries/percentage |

* 青色のアイコンをクリッ☑して、変更を保存します。

## フォームをテストする

次に、URL 内の適切な empID を使用してフォームを開く必要があります。 次の 2 つのリンクは、データベースからの情報をフォームに入力します
[empID=207 のフォーム](http://localhost:4502/content/dam/formsanddocuments/fdmdemo/jcr:content?wcmmode=disabled&amp;empID=207)
[empID=208 のフォーム](http://localhost:4502/content/dam/formsanddocuments/fdmdemo/jcr:content?wcmmode=disabled&amp;empID=208)

## トラブルシューティング

フォームが空で、データがありません

* フォームデータモデルが正しい結果を返していることを確認します。
* フォームが正しいフォームデータモデルに関連付けられています
* フィールドのバインディングを確認します。
* stdout ログファイルを確認します。 empID がファイルに書き込まれていることを確認してください。この値が表示されない場合は、フォームが提供されたカスタムテンプレートを使用していない可能性があります。

テーブルが入力されていません

* Row1 連結を確認する
* Row1 の繰り返し設定が正しく設定されていることを確認します（最小=1、最大= 5 以上）。
