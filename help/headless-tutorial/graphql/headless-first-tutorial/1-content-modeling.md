---
title: コンテンツモデリング — AEMヘッドレスの最初のチュートリアル
description: コンテンツフラグメントの活用、フラグメントモデルの作成、AEMでのGraphQLエンドポイントの使用方法について説明します。
version: Cloud Service
feature: Content Fragments, GraphQL API
topic: Headless, Development
role: Developer
level: Intermediate
doc-type: Tutorial
last-substantial-update: 2023-05-16T00:00:00Z
jira: KT-13270
thumbnail: KT-13270.jpeg
source-git-commit: 12b3888552d5a131628dabf380840f0586798ea5
workflow-type: tm+mt
source-wordcount: '785'
ht-degree: 9%

---


# コンテンツモデリング

このたびは、Adobe Experience Manager(AEM) のコンテンツフラグメントとGraphQLエンドポイントに関するチュートリアルの章をご利用いただき、誠にありがとうございます。 コンテンツフラグメントの活用、フラグメントモデルの作成、AEMでのGraphQLエンドポイントの使用について説明します。

コンテンツフラグメントは、複数のチャネルをまたいでコンテンツを管理するための構造化されたアプローチを提供し、柔軟性と再利用性を提供します。 AEMでコンテンツフラグメントを有効にすると、モジュラーコンテンツを作成し、一貫性と適応性を高めることができます。

まず、AEMでコンテンツフラグメントを有効にし、シームレスな統合に必要な設定について説明します。

次に、構造と属性を定義するフラグメントモデルの作成について説明します。 コンテンツ要件に合わせたモデルを設計し、効果的に管理する方法を学びます。

次に、モデルからコンテンツフラグメントを作成する方法を示し、オーサリングと公開に関する詳しい手順を示します。

さらに、AEM GraphQLエンドポイントの定義についても説明します。 GraphQLはAEMからデータを効率的に取得します。必要なデータを公開するためのエンドポイントを設定します。 永続化されたクエリは、パフォーマンスとキャッシュを最適化します。

チュートリアル全体で、説明、コード例、実用的なヒントを提供します。 最後に、コンテンツフラグメントの有効化、フラグメントモデルの作成、フラグメントの生成、AEM GraphQLエンドポイントと永続化されたクエリの定義のスキルを習得できます。 それでは、始めましょう。

## コンテキスト対応の設定

1. に移動します。 __ツール/設定ブラウザー__ をクリックして、ヘッドレスエクスペリエンスの設定を作成します。

   ![フォルダーを作成](./assets/1/create-configuration.png)

   次を提供： __タイトル__ および __名前__、および __GraphQL Persisted Queries__ および __コンテンツフラグメントモデル__.


## コンテンツフラグメントモデル

1. に移動します。 __ツール/コンテンツフラグメントモデル__ 手順 1 で作成した設定の名前を持つフォルダーを選択します。

   ![モデルフォルダ](./assets/1/model-folder.png)

1. フォルダー内で、「 」を選択します。 __作成__ モデルに名前を付けます。 __ティーザー__. 次のデータ型をに追加 __ティーザー__ モデル。

   | データタイプ | 名前 | 必須 | オプション |
   |----------|------|----------|---------|
   | コンテンツ参照 | Asset | はい | 必要に応じて、デフォルト画像を追加します。 例：/content/dam/wknd-headless/assets/AdobeStock_307513975.mp4 |
   | 1 行のテキスト | title（タイトル） | はい |
   | 1 行のテキスト | 事前タイトル | いいえ |
   | 複数行テキスト | 説明 | いいえ | デフォルトのタイプがリッチテキストであることを確認します。 |
   | 定義済みリスト | スタイル | はい | ドロップダウンとしてレンダリング。 オプションは、ヒーロー/ヒーロー/おすすめ —> おすすめ |

   ![ティーザーモデル](./assets/1/teaser-model.png)

1. フォルダー内に、という名前の 2 つ目のモデルを作成します。 __オファー__. 「作成」をクリックし、モデルに「オファー」という名前を付けて、次のデータ型を追加します。

   | データタイプ | 名前 | 必須 | オプション |
   |----------|------|----------|---------|
   | コンテンツ参照 | Asset | はい | デフォルト画像を追加します。 例：`/content/dam/wknd-headless/assets/AdobeStock_238607111.jpeg` |
   | 複数行テキスト | 説明 | いいえ |  |
   | 複数行テキスト | 記事 | いいえ |  |

   ![オファーモデル](./assets/1/offer-model.png)

1. フォルダー内に、という名前の 3 つ目のモデルを作成します。 __画像リスト__. 「作成」をクリックし、モデルに「画像リスト」という名前を付け、次のデータ型を追加します。

   | データタイプ | 名前 | 必須 | オプション |
   |----------|------|----------|---------|
   | フラグメント参照 | リスト項目 | はい | 複数のフィールドとしてレンダリング。 許可されているコンテンツフラグメントモデルはオファーです。 |

   ![画像リストモデル](./assets/1/imagelist-model.png)

## コンテンツフラグメント

1. 次に、 Assets に移動し、新しいサイト用のフォルダーを作成します。 「作成」をクリックし、フォルダーに名前を付けます。

   ![フォルダーの追加](./assets/1/create-folder.png)

1. フォルダーを作成したら、フォルダーを選択して開きます。 __プロパティ__.
1. フォルダーの __クラウド設定__ タブで、設定を選択します。 [以前に作成済み](#enable-content-fragments-and-graphql).

   ![アセットフォルダーのAEMヘッドレスクラウド設定](./assets/1/cloud-config.png)

   新しいフォルダーをクリックし、ティーザーを作成します。 クリック __作成__ および __コンテンツフラグメント__ をクリックし、 __ティーザー__ モデル。 モデルに名前を付ける __ヒーロー__ をクリックし、 __作成__.

   | 名前 | 備考 |
   |----------|------|
   | Asset | デフォルト値のままにするか、別のアセット（ビデオまたは画像）を選択します。 |
   | タイトル | `Explore. Discover. Live.` |
   | 事前タイトル | `Join use for your next adventure.` |
   | 説明 | 空白のままにする |
   | スタイル | `Hero` |

   ![ヒーローフラグメント](./assets/1/teaser-model.png)

## GraphQL エンドポイント

1. に移動します。 __ツール/GraphQL__

   ![AEM GraphiQL](./assets/1/endpoint-nav.png)

1. クリック __作成__ 新しいエンドポイントに名前を付け、新しく作成した設定を選択します。

   ![AEMヘッドレスGraphQLエンドポイント](./assets/1/endpoint.png)

## GraphQL 永続クエリ

1. 新しいエンドポイントをテストします。 に移動します。 __ツール/GraphQL Query Editor__ をクリックし、ウィンドウの右上にあるドロップダウンのエンドポイントを選択します。

1. クエリエディターで、いくつかの異なるクエリを作成します。


   ```graphql
   {
       teaserList {
           items {
           title
           }
       }
   }
   ```

   作成された単一のフラグメントを含むリストが表示されます [上](#create-content).

   この演習では、AEMヘッドレスアプリで使用する完全なクエリを作成します。 パスで 1 つのティーザーを返すクエリを作成します。 クエリエディターで、次のクエリを入力します。

   ```graphql
   query TeaserByPath($path: String!) {
   component: teaserByPath(_path: $path) {
       item {
       __typename
       _path
       _metadata {
           stringMetadata {
           name
           value
           }
       }
       title
       preTitle
       style
       asset {
           ... on MultimediaRef {
           __typename
           _authorUrl
           _publishUrl
           format
           }
           ... on ImageRef {
           __typename
           _authorUrl
           _publishUrl
           mimeType
           width
           height
           }
       }
       description {
           html
           plaintext
       }
       }
   }
   }
   ```

   内 __クエリ変数__ 下部に次のように入力します。

   ```json
   {
       "path": "/content/dam/pure-headless/hero"
   }
   ```

   >[!NOTE]
   >
   > クエリ変数の調整が必要になる場合があります `path` フォルダー名とフラグメント名に基づく


   クエリを実行して、先ほど作成したコンテンツフラグメントの結果を受け取ります。

1. クリック __保存__  クエリを保持（保存）し、クエリに名前を付けるには、次の手順を実行します。 __ティーザー__. これにより、アプリケーション内で名前でクエリを参照できます。

## 次の手順

おめでとうございます。コンテンツフラグメントとGraphQLエンドポイントの作成を許可するようにAEM as a Cloud Serviceを設定しました。 また、コンテンツフラグメントモデルとコンテンツフラグメントを作成し、GraphQLエンドポイントと永続化されたクエリを定義しました。 これで、次のチュートリアルの章に進む準備が整いました。この章では、この章で作成したコンテンツフラグメントとGraphQLエンドポイントを使用するAEMヘッドレス React アプリケーションを作成する方法について説明します。

[次の章：AEMヘッドレス API と React](./2-aem-headless-apis-and-react.md)