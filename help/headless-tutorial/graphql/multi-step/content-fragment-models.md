---
title: コンテンツフラグメントモデルの定義 — AEMヘッドレス使用の手引き — GraphQL
description: Adobe Experience Manager(AEM) と GraphQL の基本を学びます。 AEMでコンテンツをモデル化し、コンテンツフラグメントモデルを使用してスキーマを構築する方法について説明します。 既存のモデルを確認し、新しいモデルを作成します。 スキーマの定義に使用できる様々なデータタイプについて説明します。
version: Cloud Service
mini-toc-levels: 1
kt: 6712
thumbnail: 22452.jpg
feature: Content Fragments, GraphQL API
topic: Headless, Content Management
role: Developer
level: Beginner
exl-id: 9400d9f2-f828-4180-95a7-2ac7b74cd3c9
source-git-commit: b069d958bbcc40c0079e87d342db6c5e53055bc7
workflow-type: tm+mt
source-wordcount: '1132'
ht-degree: 4%

---

# コンテンツフラグメントモデルの定義 {#content-fragment-models}

この章では、コンテンツのモデル化と、 **コンテンツフラグメントモデル**. モデルの一部としてスキーマを定義するために使用できる様々なデータタイプについて学びます。

この章では、2 つのシンプルなモデルを作成します。 **チーム** および **人物**. この **チーム** データモデルには名前、短い名前、説明が付けられ、参照が設定されます **人物** 氏名、自己紹介の詳細、プロファイル画像、職業リストを含むデータモデル。

また、基本的な手順に従って独自のモデルを作成し、GraphQL クエリや React App コードなどの各手順を調整することも、単にこれらの章で説明する手順に従うこともできます。

## 前提条件 {#prerequisites}

これは複数のパートから成るチュートリアルで、 [AEMオーサー環境を使用できます](./overview.md#prerequisites)

## 目的 {#objectives}

* 新しいコンテンツフラグメントモデルを作成します。
* モデル構築に使用可能なデータタイプと検証オプションを特定します。
* コンテンツフラグメントモデルが定義する方法を理解する **両方** コンテンツフラグメントのデータスキーマとオーサリングテンプレート

## 新しいプロジェクト設定を作成する

プロジェクト設定には、特定のプロジェクトに関連付けられたすべてのコンテンツフラグメントモデルが含まれ、モデルを整理する手段が提供されます。 少なくとも 1 つのプロジェクトを作成する必要があります **前** 新しいコンテンツフラグメントモデルを作成しています。

1. AEMにログイン **作成者** 環境 ( 例： `https://author-pYYYY-eXXXX.adobeaemcloud.com/`)
1. AEM Start 画面で、に移動します。 **ツール** > **一般** > **設定ブラウザー**.

   ![設定ブラウザーに移動します。](assets/content-fragment-models/navigate-config-browser.png)
1. 「**作成**」をクリックします。
1. 表示されるダイアログで、次のように入力します。

   * タイトル*: **マイプロジェクト**
   * 名前*: **my-project** ( ハイフンを使用して単語を区切る場合は、すべて小文字を使用します。 この文字列は、クライアントアプリケーションがリクエストを実行する一意の GraphQL エンドポイントに影響します )。
   * チェック **コンテンツフラグメントモデル**
   * チェック **GraphQL 永続的なクエリ**

   ![マイプロジェクト設定](assets/content-fragment-models/my-project-configuration.png)

## コンテンツフラグメントモデルを作成する

次に、 **チーム** および **人物**.

### 担当者モデルの作成

の新しいモデルを作成 **人物**：チームの一部である個人を表すデータモデルです。

1. AEM Start 画面で、に移動します。 **ツール** > **一般** > **コンテンツフラグメントモデル**.

   ![コンテンツフラグメントモデルに移動します。](assets/content-fragment-models/navigate-cf-models.png)

1. 次に移動： **マイプロジェクト** フォルダー。
1. タップ **作成** 右上隅で **モデルを作成** ウィザード。
1. の場合 **モデルタイトル** 入力： **人物** とタップします。 **作成**.

   タップ **開く** 表示されたダイアログで、新しく作成したモデルを開きます。

1. ドラッグ&amp;ドロップ **1 行のテキスト** 要素をメインパネルに追加します。 次のプロパティを **プロパティ** タブ：

   * **フィールドラベル**: **氏名**
   * **プロパティ名**: `fullName`
   * チェック **必須**

   ![フルネームプロパティフィールド](assets/content-fragment-models/full-name-property-field.png)

   この **プロパティ名** は、AEMに永続化されるプロパティの名前を定義します。 この **プロパティ名** は、 **key** このプロパティの名前をデータスキーマの一部として指定します。 この **key** は、コンテンツフラグメントデータが GraphQL API を介して公開される場合に使用されます。

1. 次をタップします。 **データタイプ** タブを押しながらドラッグ&amp;ドロップ **複数行テキスト** の下の野原 **氏名** フィールドに入力します。 次のプロパティを入力します。

   * **フィールドラベル**: **伝記**
   * **プロパティ名**: `biographyText`
   * **デフォルトのタイプ**: **リッチテキスト**

1. 次をクリック： **データタイプ** タブを押しながらドラッグ&amp;ドロップ **コンテンツ参照** フィールドに入力します。 次のプロパティを入力します。

   * **フィールドラベル**: **プロファイル画像**
   * **プロパティ名**: `profilePicture`
   * **ルートパス**: `/content/dam`

   を設定する際に **ルートパス** 次の項目をクリックします。 **フォルダー** アイコンをクリックしてモーダルを表示し、パスを選択します。 これにより、作成者がパスに入力する際に使用できるフォルダーが制限されます。 `/content/dam` は、すべてのAEMアセット（画像、ビデオ、その他のコンテンツフラグメント）が保存されるルートです。

1. に検証機能を追加する **画像参照** そのため、次のタイプのコンテンツのみが **画像** を使用して、フィールドに値を入力できます。

   ![画像に制限](assets/content-fragment-models/picture-reference-content-types.png)

1. 次をクリック： **データタイプ** タブを押しながらドラッグ&amp;ドロップ **列挙**  の下のデータ型 **画像参照** フィールドに入力します。 次のプロパティを入力します。

   * **レンダリング形式**: **チェックボックス**
   * **フィールドラベル**: **職業**
   * **プロパティ名**: `occupation`

1. 複数追加 **オプション** の使用 **オプションを追加** 」ボタンをクリックします。 同じ値を **オプションラベル** および **オプションの値**:

   **アーティスト**, **影響者**, **写真家**, **旅行者**, **ライター**, **YouTuber**

1. 最終 **人物** モデルは次のようになります。

   ![最終担当者モデル](assets/content-fragment-models/final-author-model.png)

1. 「**保存**」をクリックして、変更を保存します。

### チームモデルを作成する

の新しいモデルを作成 **チーム**：ユーザーのチームのデータモデルです。 チームモデルは、チームのメンバーを表す人物モデルを参照します。

1. 内 **マイプロジェクト** フォルダー、タップ **作成** 右上隅で **モデルを作成** ウィザード。
1. の場合 **モデルタイトル** 入力： **チーム** とタップします。 **作成**.

   タップ **開く** 表示されたダイアログで、新しく作成したモデルを開きます。

1. ドラッグ&amp;ドロップ **1 行のテキスト** 要素をメインパネルに追加します。 次のプロパティを **プロパティ** タブ：

   * **フィールドラベル**: **タイトル**
   * **プロパティ名**: `title`
   * チェック **必須**

1. 次をタップします。 **データタイプ** タブをクリックし、 **1 行のテキスト** 要素をメインパネルに追加します。 次のプロパティを **プロパティ** タブ：

   * **フィールドラベル**: **短縮名**
   * **プロパティ名**: `shortName`
   * チェック **必須**
   * チェック **ユニーク**
   * の下 **検証タイプ** > 選択 **カスタム**
   * の下 **カスタム検証正規表現** > enter `^[a-z0-9\-_]{5,40}$`  — これにより、英数字の小文字の値とダッシュ（5 ～ 40 文字）のみを入力できます。

   この `shortName` プロパティは、短縮パスに基づいて個々のチームに対してクエリを実行する方法を提供します。 この **ユニーク** 設定により、このモデルのコンテンツフラグメントごとに常に一意の値が設定されます。

1. 次をタップします。 **データタイプ** タブを押しながらドラッグ&amp;ドロップ **複数行テキスト** の下の野原 **短縮名** フィールドに入力します。 次のプロパティを入力します。

   * **フィールドラベル**: **説明**
   * **プロパティ名**: `description`
   * **デフォルトのタイプ**: **リッチテキスト**

1. 次をクリック： **データタイプ** タブを押しながらドラッグ&amp;ドロップ **フラグメント参照** フィールドに入力します。 次のプロパティを入力します。

   * **レンダリング形式**: **複数のフィールド**
   * **フィールドラベル**: **チームメンバー**
   * **プロパティ名**: `teamMembers`
   * **許可されているコンテンツフラグメントモデル**:フォルダーアイコンを使用して、 **人物** モデル。

1. 最終 **チーム** モデルは次のようになります。

   ![最終チームモデル](assets/content-fragment-models/final-team-model.png)

1. 「**保存**」をクリックして、変更を保存します。

1. これで、2 つのモデルを使用できるようになります。

   ![2 つのモデル](assets/content-fragment-models/two-new-models.png)

## プロジェクト設定およびコンテンツフラグメントモデルを公開

レビューと検証の際に、 `Project Configuration` &amp; `Content Fragment Model`

1. AEM Start 画面で、に移動します。 **ツール** > **一般** > **設定ブラウザー**.

1. の横にあるチェックボックスをタップします。 **マイプロジェクト** とタップします。 **公開**

   ![プロジェクト設定を公開](assets/content-fragment-models/publish-project-config.png)

1. AEM Start 画面で、に移動します。 **ツール** > **一般** > **コンテンツフラグメントモデル**.

1. 次に移動： **マイプロジェクト** フォルダー。

1. タップ **人物** および **チーム** モデルとタップ **公開**

   ![コンテンツフラグメントモデルを公開](assets/content-fragment-models/publish-content-fragment-model.png)

## おめでとうございます。 {#congratulations}

これで、最初のコンテンツフラグメントモデルが作成されました。

## 次の手順 {#next-steps}

次の章では、 [コンテンツフラグメントモデルのオーサリング](author-content-fragments.md)コンテンツフラグメントモデルに基づいて、新しいコンテンツフラグメントを作成し、編集します。 また、コンテンツフラグメントのバリエーションを作成する方法についても説明します。

## 関連ドキュメント

* [コンテンツフラグメントモデル](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/assets/content-fragments/content-fragments-models.html)

